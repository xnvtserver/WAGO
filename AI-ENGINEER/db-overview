
# 📐 **LMS Database Schema**

---

## 🧑 **Users Table**

Stores all system users (student, faculty, staff, admin).

**users**

| Column         | Type         | Constraints                                      | Notes                 |
| -------------- | ------------ | ------------------------------------------------ | --------------------- |
| id             | PK, int      | auto-increment                                   | user ID               |
| name           | varchar(255) | not null                                         | full name             |
| email          | varchar(255) | unique, not null                                 | login                 |
| password\_hash | varchar(255) | not null                                         | hashed                |
| phone          | varchar(20)  | nullable                                         | contact               |
| avatar\_url    | varchar(255) | nullable                                         | profile pic           |
| role           | enum         | student, faculty, staff, admin (default student) | RBAC                  |
| settings       | jsonb        | default `{}`                                     | dashboard preferences |
| created\_at    | timestamp    | default now()                                    |                       |
| updated\_at    | timestamp    | default now()                                    |                       |

---

## 🎓 **Student-Specific**

**student\_profiles**

| Column       | Type          | Constraints                 | Notes                         |
| ------------ | ------------- | --------------------------- | ----------------------------- |
| user\_id     | FK → users.id | PK, references student user |                               |
| grade\_level | varchar(50)   | not null                    | e.g. "Grade 10"               |
| streaks      | int           | default 0                   | learning streaks              |
| badges       | jsonb         | default `[]`                | gamification                  |
| analytics    | jsonb         | default `{}`                | attendance, marks, engagement |

---

## 📚 **Courses**

**courses**

| Column      | Type          | Constraints            | Notes     |
| ----------- | ------------- | ---------------------- | --------- |
| id          | PK, int       | auto-increment         |           |
| title       | varchar       | not null               |           |
| description | text          | nullable               |           |
| teacher\_id | FK → users.id | nullable, role=faculty |           |
| schedule    | jsonb         | default `{}`           | timetable |
| created\_at | timestamp     | default now()          |           |
| updated\_at | timestamp     | default now()          |           |

**enrollments** (many-to-many: students in courses)

| Column      | Type            | Constraints            | Notes      |
| ----------- | --------------- | ---------------------- | ---------- |
| id          | PK, int         | auto-increment         |            |
| course\_id  | FK → courses.id | not null               |            |
| student\_id | FK → users.id   | not null, role=student |            |
| progress    | int             | default 0              | percentage |

---

## 📝 **Assignments & Submissions**

**assignments**

| Column      | Type            | Constraints    | Notes |
| ----------- | --------------- | -------------- | ----- |
| id          | PK, int         | auto-increment |       |
| course\_id  | FK → courses.id | not null       |       |
| title       | varchar(255)    | not null       |       |
| description | text            | nullable       |       |
| due\_date   | date            | nullable       |       |
| created\_at | timestamp       | default now()  |       |

**submissions**

| Column         | Type                | Constraints            | Notes            |
| -------------- | ------------------- | ---------------------- | ---------------- |
| id             | PK, int             | auto-increment         |                  |
| assignment\_id | FK → assignments.id | not null               |                  |
| student\_id    | FK → users.id       | not null, role=student |                  |
| file\_url      | varchar(255)        | nullable               | uploaded file    |
| content        | text                | nullable               | text answers     |
| status         | enum                | submitted, graded      |                  |
| grade          | int                 | nullable               | score            |
| feedback       | text                | nullable               | faculty comments |
| submitted\_at  | timestamp           | default now()          |                  |

---

## 🧪 **Exams**

**exams**

| Column      | Type            | Constraints    | Notes |
| ----------- | --------------- | -------------- | ----- |
| id          | PK, int         | auto-increment |       |
| course\_id  | FK → courses.id | not null       |       |
| title       | varchar(255)    | not null       |       |
| description | text            | nullable       |       |
| date        | date            | nullable       |       |
| created\_at | timestamp       | default now()  |       |

**exam\_submissions**

| Column      | Type          | Constraints            | Notes             |
| ----------- | ------------- | ---------------------- | ----------------- |
| id          | PK, int       | auto-increment         |                   |
| exam\_id    | FK → exams.id | not null               |                   |
| student\_id | FK → users.id | not null, role=student |                   |
| answers     | jsonb         | default `{}`           | student’s answers |
| grade       | int           | nullable               |                   |
| feedback    | text          | nullable               |                   |

---

## 📅 **Calendar & Events**

**events**

| Column      | Type          | Constraints                      | Notes                                          |
| ----------- | ------------- | -------------------------------- | ---------------------------------------------- |
| id          | PK, int       | auto-increment                   |                                                |
| title       | varchar(255)  | not null                         |                                                |
| description | text          | nullable                         |                                                |
| type        | enum          | class, exam, assignment, meeting |                                                |
| start\_time | timestamp     | not null                         |                                                |
| end\_time   | timestamp     | not null                         |                                                |
| created\_by | FK → users.id | not null                         |                                                |
| audience    | jsonb         | default `[]`                     | who sees it (student\_ids, role=faculty, etc.) |

---

## 📊 **Analytics**

**analytics**

| Column      | Type          | Constraints                 | Notes           |
| ----------- | ------------- | --------------------------- | --------------- |
| id          | PK, int       | auto-increment              |                 |
| user\_id    | FK → users.id | not null                    |                 |
| role        | enum          | student/faculty/staff/admin | context         |
| metrics     | jsonb         | default `{}`                | dynamic metrics |
| created\_at | timestamp     | default now()               |                 |

---

## 💬 **Messaging & Notifications**

**messages**

| Column       | Type          | Constraints    | Notes |
| ------------ | ------------- | -------------- | ----- |
| id           | PK, int       | auto-increment |       |
| sender\_id   | FK → users.id | not null       |       |
| receiver\_id | FK → users.id | not null       |       |
| content      | text          | not null       |       |
| created\_at  | timestamp     | default now()  |       |

**notifications**

| Column      | Type          | Constraints                | Notes |
| ----------- | ------------- | -------------------------- | ----- |
| id          | PK, int       | auto-increment             |       |
| user\_id    | FK → users.id | not null                   |       |
| message     | varchar(255)  | not null                   |       |
| type        | enum          | system, reminder, deadline |       |
| read        | boolean       | default false              |       |
| created\_at | timestamp     | default now()              |       |

---

## 🛠️ **Staff: Tasks & Support**

**tasks**

| Column       | Type          | Constraints                 | Notes |
| ------------ | ------------- | --------------------------- | ----- |
| id           | PK, int       | auto-increment              |       |
| assigned\_to | FK → users.id | not null, role=staff        |       |
| title        | varchar(255)  | not null                    |       |
| description  | text          | nullable                    |       |
| status       | enum          | pending, in\_progress, done |       |
| due\_date    | date          | nullable                    |       |

**tickets** (support system)

| Column       | Type          | Constraints                  | Notes           |
| ------------ | ------------- | ---------------------------- | --------------- |
| id           | PK, int       | auto-increment               |                 |
| created\_by  | FK → users.id | not null                     | student/faculty |
| assigned\_to | FK → users.id | nullable, role=staff         |                 |
| subject      | varchar(255)  | not null                     |                 |
| description  | text          | not null                     |                 |
| status       | enum          | open, in\_progress, resolved |                 |
| created\_at  | timestamp     | default now()                |                 |

---

## 🏛️ **Admin: Approvals & Finance**

**approvals**

| Column        | Type          | Constraints                 | Notes            |
| ------------- | ------------- | --------------------------- | ---------------- |
| id            | PK, int       | auto-increment              |                  |
| request\_type | enum          | leave, course, finance      |                  |
| request\_data | jsonb         | default `{}`                | flexible payload |
| status        | enum          | pending, approved, rejected |                  |
| created\_by   | FK → users.id | not null                    |                  |
| reviewed\_by  | FK → users.id | nullable, role=admin        |                  |

**finance**

| Column      | Type      | Constraints                   | Notes |
| ----------- | --------- | ----------------------------- | ----- |
| id          | PK, int   | auto-increment                |       |
| type        | enum      | fee, salary, expense, revenue |       |
| amount      | decimal   | not null                      |       |
| description | text      | nullable                      |       |
| created\_at | timestamp | default now()                 |       |

---

## 📂 **Resources**

**resources**

| Column       | Type          | Constraints    | Notes      |
| ------------ | ------------- | -------------- | ---------- |
| id           | PK, int       | auto-increment |            |
| title        | varchar(255)  | not null       |            |
| file\_url    | varchar(255)  | nullable       |            |
| metadata     | jsonb         | default `{}`   | tags, type |
| uploaded\_by | FK → users.id | not null       |            |
| created\_at  | timestamp     | default now()  |            |

---

# 🖼️ ERD Overview (simplified)

```
Users --< Enrollments >-- Courses --< Assignments --< Submissions
                               \
                                \--< Exams --< Exam_Submissions

Users --< Messages >-- Users
Users --< Notifications
Users --< Tasks
Users --< Tickets

Admin: Approvals, Finance
Shared: Events, Analytics, Resources
```

---

✅ This schema supports **all 4 dashboards**:

* **Student** → enrollments, submissions, streaks, analytics.
* **Faculty** → courses, assignments, grading, insights.
* **Staff** → tasks, tickets, resources.
* **Admin** → approvals, finance, system management.
